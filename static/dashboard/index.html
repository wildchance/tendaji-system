<!DOCTYPE html>
<html>
<head>
    <title>Tendaji Dashboard</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        table { width: 100%; border-collapse: collapse; margin-bottom: 30px; }
        th, td { border: 1px solid #ddd; padding: 8px; }
        th { background: #333; color: white; }
        .section-title { font-size: 22px; margin: 20px 0 10px; }
    </style>
</head>
<body>

<h1>ðŸ“Š Tendaji Signals & Trade Logs</h1>

<div>
    <h2 class="section-title">ðŸŸ¢ Live Signals</h2>
    <table id="signalsTable">
        <thead>
            <tr>
                <th>ID</th><th>Symbol</th><th>Action</th><th>Strength</th><th>Time</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>
</div>

<div>
    <h2 class="section-title">ðŸ’¹ Trade Executions</h2>
    <table id="tradesTable">
        <thead>
            <tr>
                <th>ID</th><th>Pair</th><th>Action</th><th>Lot Size</th><th>Price</th><th>Time</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>
</div>

<script>
async function loadSignals() {
    const res = await fetch("/api/signals");
    const data = await res.json();
    const tbody = document.getElementById("signalsTable").querySelector("tbody");
    tbody.innerHTML = data.map(r => `
        <tr>
            <td>${r.id}</td>
            <td>${r.symbol}</td>
            <td>${r.action}</td>
            <td>${r.strength}</td>
            <td>${r.created_at}</td>
        </tr>
    `).join("");
}

async function loadTrades() {
    const res = await fetch("/api/trades");
    const data = await res.json();
    const tbody = document.getElementById("tradesTable").querySelector("tbody");
    tbody.innerHTML = data.map(r => `
        <tr>
            <td>${r.id}</td>
            <td>${r.pair}</td>
            <td>${r.action}</td>
            <td>${r.lot_size}</td>
            <td>${r.price}</td>
            <td>${r.created_at}</td>
        </tr>
    `).join("");
}

loadSignals();
loadTrades();

// auto-refresh every 10 seconds
setInterval(() => {
    loadSignals();
    loadTrades();
}, 10000);
</script>

</body>
</html>
